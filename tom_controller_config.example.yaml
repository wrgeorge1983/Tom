# Tom Smykowski Core Service Configuration
# YAML version of core-related settings from local.env.example

# Core Service Settings
host: "0.0.0.0"
port: 8000
log_level: "info"
project_root: "../../../.."

# Redis Configuration
redis_host: "localhost"  # would be 'redis' when running in docker compose
redis_port: 6379

# Cache Configuration
cache_enabled: true
cache_default_ttl: 300  # 5 minutes
cache_max_ttl: 3600  # 1 hour
cache_key_prefix: "tom_cache"

# Authentication
allow_inline_credentials: true  # good to keep this False when there are better options
auth_mode: "api_key"
api_key_headers: ["X-API-Key", "api-key"]
api_keys: ["abc123:admin", "asldfjaldkf:admin"]
oauth_test_enabled: false  # Enable OAuth test endpoints (should be false in production)

# Inventory Configuration
inventory_type: "yaml"  # or "solarwinds" or "nautobot"

# YAML Plugin Configuration
# Note: Uses project_root from main settings (defined above)
plugin_yaml_inventory_file: "inventory/inventory.yml"

# Nautobot Plugin Configuration
plugin_nautobot_url: "https://nautobot.company.com"
plugin_nautobot_token: "your-api-token-here"

# Credential mapping - using custom field (recommended)
plugin_nautobot_credential_source: "custom_field"
plugin_nautobot_credential_field: "credential_id"
plugin_nautobot_credential_default: "default"

# Optional: Using config context instead
# plugin_nautobot_credential_source: "config_context"
# plugin_nautobot_credential_context_path: "tom.credential_id"  # Can be nested like "tom.credentials.ssh"

# Optional: Filter which devices to import
# Use Status/Role/Location/Tag NAMES as they appear in your Nautobot instance
# Leave empty ([]) to disable filtering
plugin_nautobot_status_filter: []  # e.g., ["Active", "Planned"]
plugin_nautobot_role_filter: []    # e.g., ["Edge Router", "Core Switch"]
plugin_nautobot_location_filter: [] # e.g., ["NYC-DC1", "SFO-DC2"]  
plugin_nautobot_tag_filter: []     # e.g., ["production", "tom-managed"]

# Defaults (used when platform data is missing/incomplete)
plugin_nautobot_default_adapter: "netmiko"  # or "scrapli"
plugin_nautobot_default_driver: "cisco_ios"

# SolarWinds Plugin Configuration
# Note: All plugin settings use the plugin_ prefix format
plugin_solarwinds_host: "solarwinds.example.com"
plugin_solarwinds_port: 17774
plugin_solarwinds_username: "swapi_user"
plugin_solarwinds_password: "swapi_pw"
plugin_solarwinds_default_cred_name: "autoUser"

# SolarWinds Device Mappings - processed in order, first match wins
plugin_solarwinds_device_mappings:
  - match:
      vendor: "cisco"
      description: "asr"
    action:
      adapter: "scrapli"
      adapter_driver: "cisco_iosxe"
      credential_id: "cisco_creds"
      port: 22
  - match:
      vendor: "arista"
    action:
      adapter: "scrapli" 
      adapter_driver: "arista_eos"
      credential_id: "arista_creds"
  - match:
      vendor: "cisco"
    action:
      adapter: "netmiko"
      adapter_driver: "cisco_ios"
      credential_id: "cisco_creds"
  # Default catch-all rule (matches everything)
  - match:
      vendor: ".*"
    action:
      adapter: "netmiko"
      adapter_driver: "cisco_ios"
