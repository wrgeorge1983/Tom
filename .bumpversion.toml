  [tool.bumpversion]
  current_version = "0.10.0"
  parse = "(?P<major>\\d+)\\.(?P<minor>\\d+)\\.(?P<patch>\\d+)"
  serialize = ["{major}.{minor}.{patch}"]
  commit = true
  tag = true
  tag_name = "v{new_version}"
  commit_args = "-a"
  pre_commit_hooks = ["uv sync --directory services/controller", "uv sync --directory services/worker"]

  [[tool.bumpversion.files]]
  filename = "VERSION"

#  [[tool.bumpversion.files]]
#  filename = "pyproject.toml"
#  search = "version = \"{current_version}\""
#  replace = "version = \"{new_version}\""

  [[tool.bumpversion.files]]
  filename = "services/controller/pyproject.toml"
  search = "version = \"{current_version}\""
  replace = "version = \"{new_version}\""

  [[tool.bumpversion.files]]
  filename = "services/controller/src/tom_controller/__init__.py"

  [[tool.bumpversion.files]]
  filename = "services/worker/pyproject.toml"
  search = "version = \"{current_version}\""
  replace = "version = \"{new_version}\""

  [[tool.bumpversion.files]]
  filename = "services/worker/src/tom_worker/__init__.py"

#  [[tool.bumpversion.files]]      # this breaks things!
#  filename = "shared/pyproject.toml"
#  search = "version = \"{current_version}\""
#  replace = "version = \"{new_version}\""

  # Add more services as needed
#  [[tool.bumpversion.files]]
#  filename = "services/api/pyproject.toml"
#  search = "version = \"{current_version}\""
#  replace = "version = \"{new_version}\""
